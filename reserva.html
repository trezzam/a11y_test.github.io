<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>Reserva - Casa Rural El Grullo</title>
    <style>
        body { margin: 0; padding: 0; font-family: sans-serif; }
        
        /* Logo restaurado */
        #logo { height: 60px; padding: 10px; }

        .booking-row {
            display: flex;
            flex-direction: row;
            align-items: flex-start;
            gap: 20px;
            background: #eeeeee;
            padding: 20px;
            width: 95%;
            height: 400px; 
            margin: 20px auto;
        }

        .field-container { display: flex; flex-direction: column; position: relative; }
        .label-fake { font-size: 11px; margin-bottom: 4px; color: #555; }

        /* Inputs ultra estrechos */
        .date-input-group input { width: 20px; text-align: center; border: 1px solid #ccc; font-size: 10px; }
        .date-input-group input[id^="a-"] { width: 40px; }

        /* Men煤 sin fondo */
        nav ul { list-style: none; display: flex; gap: 20px; padding: 0 20px; margin: 0; }
        nav ul li a { color: #333; text-decoration: none; }
        .submenu { display: none; position: absolute; padding: 10px; flex-direction: column; z-index: 2000; }
        li:hover .submenu { display: flex; }

        /* Mensajes de estado */
        @keyframes blink { 50% { opacity: 0; } }
        .buscando {
            display: none;
            color: orange;
            animation: blink 0.5s infinite;
            font-size: 12px;
        }

        #mensaje-error-final {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: red;
            font-size: 24px;
            font-weight: bold;
            background: white; /* Para que al menos se lea sobre el caos */
            padding: 20px;
            border: 2px solid red;
            z-index: 3000;
        }

        .calendar-wrapper {
            position: absolute;
            top: 100%; left: 0; background: white; border: 1px solid #999;
            display: none; width: 200px; z-index: 1500;
        }
    </style>
</head>
<body>
    <header>
        <img src="logoGrullo.png" id="logo" alt="Logo">
        <nav>
            <ul class="main-menu">
                <li><a href="index.html">La casa</a></li>
                <li class="has-submenu">
                    <span style="cursor:default; color:#666;">Actividades</span>
                    <ul class="submenu">
                        <li><a href="mar.html">Mar</a></li>
                        <li><a href="montana.html">Monta帽a</a></li>
                    </ul>
                </li>
                <li><a href="reserva.html">Reserva</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <div class="booking-row">
            <div class="field-container">
                <span class="label-fake">Entrada</span>
                <div class="date-input-group">
                    <input type="text" id="d-in" placeholder="D" readonly>
                    <input type="text" id="m-in" placeholder="M" readonly>
                    <input type="text" id="a-in" placeholder="A" readonly>
                    <button onclick="toggleCalendar('cal-in', 'in')"></button>
                    <div id="cal-in" class="calendar-wrapper"><div id="days-grid-in"></div></div>
                </div>
            </div>

            <div class="field-container">
                <span class="label-fake">Salida</span>
                <div class="date-input-group">
                    <input type="text" id="d-out" placeholder="D" readonly>
                    <input type="text" id="m-out" placeholder="M" readonly>
                    <input type="text" id="a-out" placeholder="A" readonly>
                    <button id="btn-out" onclick="toggleCalendar('cal-out', 'out')" disabled></button>
                    <div id="cal-out" class="calendar-wrapper"><div id="days-grid-out"></div></div>
                </div>
            </div>

            <div class="field-container">
                <span class="label-fake">Personas</span>
                <input type="number" id="num-pers" value="1" disabled onchange="resetError(); checkNext()">
            </div>

            <div class="field-container">
                <span class="label-fake">Habitaci贸n</span>
                <select id="room-select" disabled onchange="iniciarBusqueda()">
                    <option value="">Elegir...</option>
                    <option value="1">Amapola</option>
                </select>
                <div id="msg-buscando" class="buscando">Buscando...</div>
            </div>
        </div>

        <div id="mensaje-error-final">No hay disponibilidad, lo sentimos</div>
    </main>

    <script>
        function resetError() {
            document.getElementById('msg-buscando').style.display = 'none';
            document.getElementById('mensaje-error-final').style.display = 'none';
        }

        function iniciarBusqueda() {
            resetError();
            const b = document.getElementById('msg-buscando');
            b.style.display = 'block';
            
            setTimeout(() => {
                b.style.display = 'none';
                document.getElementById('mensaje-error-final').style.display = 'block';
            }, 5000);
        }

        // L贸gica simplificada para el ejemplo
        function toggleCalendar(id, type) {
            resetError();
            document.getElementById(id).style.display = 'block';
            // (Aqu铆 ir铆a la l贸gica de render que ya tienes)
            // Simulaci贸n de selecci贸n para habilitar pasos:
            setTimeout(() => {
                if(type === 'in') document.getElementById('btn-out').disabled = false;
                if(type === 'out') document.getElementById('num-pers').disabled = false;
                if(type === 'out') document.getElementById('room-select').disabled = false;
            }, 1000);
        }

        function checkNext() {
            // Activa el siguiente si es necesario
        }
    </script>
</body>
</html>
